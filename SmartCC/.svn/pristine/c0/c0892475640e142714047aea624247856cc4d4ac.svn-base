<%@ page language="java" import="java.util.*" pageEncoding="utf-8"%>
<%
String path = request.getContextPath();
String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";
%>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <base href="<%=basePath%>">
    
    <title>Smart cycle counting</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="expires" content="0">    
	<meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
	<meta http-equiv="description" content="This is my page">
	<!--
	<link rel="stylesheet" type="text/css" href="styles.css">
	-->
	<link rel="stylesheet" type="text/css" href="css/easyui.css">
	<link rel="stylesheet" type="text/css" href="http://www.jeasyui.net/Public/js/easyui/themes/icon.css">
	<link rel="stylesheet" type="text/css" href="css/SmartCC.css">
	<link rel="stylesheet" type="text/css" href="css/buttonStyle.css">
	
	<link rel="stylesheet" type="text/css" href="css/switchStyle.css">
	<script type="text/javascript" src="js/echarData.js"></script>
	<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
	<script type="text/javascript" src="js/jquery.easyui.min.js"></script>
	<script type="text/javascript" src="js/jquery-form.js"></script>
	<script type="text/javascript" src="js/highcharts.js"></script>
	<script type="text/javascript" src="js/exporting.js"></script>
	<script type="text/javascript" src="js/echarts.min.js"></script>
	<script type="text/javascript" src="js/jquery.SuperSlide.js"></script>
	<script type="text/javascript" src="js/iradio.js"></script>
	<script type="text/javascript" src="js/SmartCC_EN_02.js"></script>
	<style type="text/css">
		*{margin:0;padding:0;list-style:none;}
		img{border:0;}
		a{text-decoration:none;color:#333;}
		a:hover{color:#1974A1;}
	</style>
<script type="text/javascript">

$(document).ready(function (){
//分配人员提交按钮响应
	$("#submitSchemeBtn").click(function(){
		submitScheme();
	});
	//iradio();//控制开关的方法
	loadPersonList();//加载人员列表	
	loadData();//加载数据
	$('#cc').combobox({    
    	onChange : function(n,o){searchDivisionResult();}  
	});
	$('#searchState').combobox({    
    	onChange : function(n,o){searchDivisionResult();}  
	});
	
	$("#emergencyBtn").click(function(){
		$('#dlg').dialog('open').dialog('setTitle', 'Emergency');
		$('#fm').form('clear');
	});
	//上传文件按钮响应
	$("#uploadBtn").click(function (){
	//添加加载遮罩层
		uploadTasks();
	});
});
	</script>
	<style>
		
		<!--遮罩层的css代码-->
		*{margin:0;padding:0;list-style-type:none;}
		a,img{border:0;}
		.demo{margin:100px auto 0 auto;width:400px;text-align:center;font-size:18px;}
		.demo .action{color:#3366cc;text-decoration:none;font-family:"微软雅黑","宋体";}
		
		.overlay{position:fixed;top:0;right:0;bottom:0;left:0;z-index:998;width:100%;height:100%;_padding:0 20px 0 0;background:#f6f4f5;display:none;}
		.showbox{position:fixed;top:0;left:50%;z-index:9999;opacity:0;filter:alpha(opacity=0);margin-left:-80px;}
		*html,*html body{background-image:url(about:blank);background-attachment:fixed;}
		*html .showbox,*html .overlay{position:absolute;top:expression(eval(document.documentElement.scrollTop));}
		#AjaxLoading{border:1px solid #8CBEDA;color:#37a;font-size:12px;font-weight:bold;}
		#AjaxLoading div.loadingWord{width:180px;height:50px;line-height:50px;border:2px solid #D6E7F2;background:#fff;}
		#AjaxLoading img{margin:10px 15px;float:left;display:inline;}
		
	</style>
</head>
	
	<body style="width:100%;height: 100%;">
	<div id="dlg" class="easyui-dialog"
		data-options="iconCls:'icon-save',resizable:true,modal:true"
		style="width:340px;height:180px;padding:10px 20px;top:200px" closed="true"
		buttons="#dlg-buttons">
		<div class="ftitle" style="font-size: 15px"></div>
		
		<div class="overlay"></div>

		<div id="AjaxLoading" class="showbox">
			<div class="loadingWord"><img src="waiting.gif">data loading ...</div>
		</div>
		<form id="fm" name="fm" method="post"
			action="/SmartCC/smartCCIndex?method=uploadEmergencyTaskExcel" data-options="novalidate:true" enctype="multipart/form-data">
			<input type="hidden" name="method" value="uploadEmergencyTaskExcel">
			
			<table>
				
				<tr>
					<td><font style="font-size: 12px">Choose file:&nbsp; </font></td>
					<td>
						<input id="fileBox1" name=emergencyExcelData class="easyui-filebox"  data-options="prompt:'Choose a excel（xls、xlsx）',buttonText:'&nbsp;Choose file &nbsp;'" style="width: 200px;">
					</td>
				</tr>
				<tr>
					<td><font style="font-size: 12px">Component: &nbsp; </font></td><td><input id="component" name="component"
					class="easyui-textbox" data-options="required:false" style="width: 200px;"></td>
				</tr>
				<tr>
					<td><font style="font-size: 12px">Part station:&nbsp;  </font></td><td><input id="station" name="station"
					class="easyui-textbox" data-options="required:false" style="width: 200px;"></td>
				</tr>
			</table>
			
			
		</form>
	</div>
	<div id="dlg-buttons">
		<a href="javascript:void(0)" class="easyui-linkbutton  button blue"
			data-options="iconCls:'icon-ok'" onclick="addEmergency()" style="width:90px">确定</a> <a
			href="javascript:void(0)" class="easyui-linkbutton  button blue"
			data-options="iconCls:'icon-cancel'" onclick="javascript:$('#dlg').dialog('close')"
			style="width:90px">取消</a>
	</div>
	<div class="overlay"></div>
	
	 
		<table style="width: 100%;height: 100%;border: 1" border="0">
			<tr style="">
			<!-- 左侧留白 -->
				<td style="width: 5%;height: 100%;"></td>
				<!-- 中间主体 -->
				<td style="width: 90%;height: 100%">
					<table border="0" style="width: 100%;height: 100%;">
						<!-- 上方留白 -->
						<tr style="width: 100%;height: 3%;">
							<td></td>
						</tr>
						<tr style="width: 100%;height: 3%;">
							<td colspan="4">
								<div>
									<a class="logo" href="###" onclick="reLoad();return false;"><img alt="" src="images/bmwlogo.png" style="width: 4%;" class="logo"></a>
									<font style="font-size: 28;color:white;font-weight: bold;margin-top: 5%">Smart Cycle Counting</font>
								</div>
							</td>
						</tr>
						<!-- 上面的两个表格 -->
						<tr style="width: 100%;height: 40%;">
							<td style="width: 100%;">
								<table style="width: 100%;height: 100%;border: 1">
									<tr>
										<!-- 分配结果列表 -->
										<td class = "layoutTable" style="width: 60%;">
											
											<div style="margin-top: 5px;">
												<!-- 下载按钮 -->
												<a href="/SmartCC/servlet/ExportDivideHistoryInfoServlet" id="downLoadBtn" onclick="downLoad()" 
								    				class="easyui-linkbutton  button blue" 
								    				style="width: 60px;height: 25px;font-size: 10">
								    				<font style="font-size: 10">DownLoad</font>
								    			</a>
								    			<!-- start按钮 -->
								    			<a href="####" id="startBtn" onclick="updateState(-1);return false;" class="easyui-linkbutton button blue" style="width: 60px;height: 25px;">
							    					<font style="font-size:10 ">Start</font>
							    				</a>
							    				<!-- finish按钮 -->
							    				<a href="####" id="finishBtn" onclick="updateState(-1);return false;" class="easyui-linkbutton button blue" style="width: 60px;height: 25px;">
							    					<font style="font-size:10 ">Finish</font>
							    				</a>
												<font style="font-size: 13px;margin-left: 10px;">Choose person：</font><input id="cc" class="easyui-combobox" name="dept"
						    					data-options="valueField:'id',
						    					textField:'name',
						    					url:'/SmartCC/smartCCIndex?method=loadWorkers',"  
						    					style="width: 15%;height: 25px">
												<font style="font-size: 13px;margin-left: 10px;">Status：</font> 
												<select autocomplete="off" id="searchState"  name="dept" style="width:15%;height: 25px;">
													    <option value="" selected="selected">Choose one</option>
													    <option value="1">Assigned</option>
													    <option value="2">Completing</option>
													    <option value="3">Completed</option>
													</select>
													<!-- <a href="javascript:void(0)" id="searchBtn" class="easyui-linkbutton  button blue" style="width: 15%;height: 30px;">Search</a> -->
								    				
							    			</div>
							    			<!-- 分配结果列表 -->
							    			<table align="center" id="divideResult" class="easyui-datagrid" title="" style="height:85%;width:100%;margin: 0 auto;"
											data-options="singleSelect:false,collapsible:true,url:'',method:'get',fitColumns:true,">
												<thead >
													<tr>
														<th data-options="field:'dh',width:100,align:'center',checkbox:'true'">Choose</th>
														<th data-options="field:'workerId',width:130,align:'center'">Staff No.</th>
														<th data-options="field:'componentName',width:130,align:'center'">Component</th>
														<th data-options="field:'orderNum',width:130,align:'center'">Order</th>
														<th data-options="field:'stationNames',width:280,align:'center'">Part station</th>
														<th data-options="field:'state',width:130,align:'center',formatter:formatterState">Status</th>
														<th data-options="field:'operate',width:130,formatter:formatOper,align:'center'">Operation</th>
													</tr>
												</thead>
											</table>
										</td>
										<!-- 分配结果列表结束 -->
										<td style="width: 3%;"></td>
										<!-- echart 横向柱状图 -->
										<td class="layoutTable" style="width: 37%;">
											<div id="container" style="width:100%; height:100%;"></div>
										</td>
										<!-- echart 横向柱状图结束 -->
									</tr>
								</table>
							</td>
						</tr>
						<!-- 上面两个表格结束 -->
						<!-- 中间留白 -->
						<tr style="width: 100%;height: 3%;">
							<td></td>
						</tr>
						<!-- 中间留白结束 -->
						<!-- 下面的两个表格 -->
						<tr style="width: 100%;height: 40%;">
							<td style="width: 100%">
							<form id="demoForm" class="easyui-layout" style="width: 100%;height: 100%" method="post" enctype="multipart/form-data" action="/SmartCC/smartCCIndex?method=uploadTaskExcel" method="post">
								<table style="width: 100%;height: 100%;border: 1">
									<tr>
										<!-- 任务列表 -->
										<td class="layoutTable" style="width: 55%">
										
											<div style="margin-top:5px;">
												<input id="fileBox" name="excelData" class="easyui-filebox"  data-options="prompt:'Choose a excel（xls、xlsx）',buttonText:'&nbsp;Choose file &nbsp;'" style="width:40%;height: 25px;">
							    				<!--  <font style="font-size: 13px;margin-left: 10px;">Emergency:</font>
							    				<p class="myradio">
													    <label class="open hidden">
													        <input name="isEmergency" type="radio" value="open" />
													    </label>
													    <label class="close">
													        <input name="isEmergency" type="radio" value="close" />
													    </label>
													</p>
												-->
							    				<a href="javascript:void(0)" id="uploadBtn" class="easyui-linkbutton button blue" style="width: 60px;height: 25px;">
							    					<font style="font-size:10 ">Upload</font>
							    				</a>
							    				<a href="javascript:void(0)" id="emergencyBtn" class="easyui-linkbutton button blue" style="width: 60px;height: 25px;">
							    					<font style="font-size:10 ">Emergency</font>
							    				</a>
						    				</div>
						    				
						    				<!--<a href="javascript:void(0)" id="emergencyBtn" class="easyui-linkbutton button blue" style="width: 100px;height: 30px;">Emergency</a>  -->
								  					<!-- 任务列表 -->
						  					<table align="center" id="taskTable" class="easyui-datagrid" title="" style="height:80%;width: 100%;margin-left: 5px;"
											data-options="
											singleSelect:true,
											collapsible:true,
											url:'',
											method:'get',
											striped:true,
											fitColumns:true
											">
												<thead>
													<tr>
														<th data-options="field:'taskNo',width:100,align:'center'">TaskNo.</th>
														<th data-options="field:'componentName',width:100,align:'center'">Component</th>
														<th data-options="field:'stationName',width:100,align:'center'">Part station</th>
														<th data-options="field:'type',width:100,align:'center'">Category</th>
														<th data-options="field:'workerId',width:100,align:'center'">Staff No.</th>
														<!--  <th data-options="field:'orderNum',width:130,align:'center'">Order</th>-->
														<th data-options="field:'state',width:100,align:'center',formatter:formatterState">Status</th>
													</tr>
												</thead>
											</table>
										</td>
										<!-- 任务列表结束 -->
										<!-- 人员列表 -->
										<td class="layoutTable" style="width: 20%">
											<a href="####" class="easyui-linkbutton  button blue" style="margin-top:5px;height: 25px;width: 60px;" id="submitSchemeBtn" onclick="return false;">
												<font style="font-size: 10">Submit</font>
											</a>
		    								<table id="tt" style="width: 100%;height: 80%;"></table>
										</td>
										<!-- 人员列表结束 -->
										<!-- 中间留白 -->
										<td style="width: 2%"></td>
										<!-- 中间留白结束 -->
										<!-- 进度表 -->
										<td class="layoutTable" style="width: 23%;">
											<div id="gauge"  style="width:100%; height:100%;"></div>
										</td>
										<!-- 进度表结束 -->
									</tr>
								</table>
								</form>
							</td>
							
						</tr>
						<!-- 下方留白 -->
						<tr style="width: 100%;height: 7%;">
							<td colspan="3"></td>
						</tr>
						<!-- 下方留白结束 -->
					</table>
				</td>
				<td style="width: 5%"></td>
			</tr>
		</table>
		</form>
	</body>
</html>